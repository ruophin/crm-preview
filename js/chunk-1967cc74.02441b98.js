(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1967cc74"],{"0950":function(t,e,a){"use strict";var i=a("c40b"),n=a.n(i);n.a},"5f35":function(t,e,a){"use strict";(function(e){a("a15b");var i=a("df7c"),n=a("83d6");function l(t){return i.join(e,t)}var s=n.title||"vue Admin Template",o=Object({NODE_ENV:"production",BASE_URL:""}).port||Object({NODE_ENV:"production",BASE_URL:""}).npm_config_port||8080;t.exports={publicPath:"./",outputDir:"dist",lintOnSave:!1,productionSourceMap:!1,devServer:{port:o,open:!0,overlay:{warnings:!0,errors:!0}},configureWebpack:{name:s,resolve:{alias:{"@":l("src"),"@components":l("src/components"),"@css":l("src/css")}}},chainWebpack:function(t){t.plugin("preload").tap((function(){return[{rel:"preload",fileBlacklist:[/\.map$/,/hot-update\.js$/,/runtime\..*\.js$/],include:"initial"}]})),t.plugins.delete("prefetch"),t.module.rule("svg").exclude.add(l("src/icons")).end(),t.module.rule("icons").test(/\.svg$/).include.add(l("src/icons")).end().use("svg-sprite-loader").loader("svg-sprite-loader").options({symbolId:"icon-[name]"}).end(),t.when(!0,(function(t){t.plugin("ScriptExtHtmlWebpackPlugin").after("html").use("script-ext-html-webpack-plugin",[{inline:/runtime\..*\.js$/}]).end(),t.optimization.splitChunks({chunks:"all",cacheGroups:{libs:{name:"chunk-libs",test:/[\\/]node_modules[\\/]/,priority:10,chunks:"initial"},elementUI:{name:"chunk-elementUI",priority:20,test:/[\\/]node_modules[\\/]_?element-ui(.*)/},commons:{name:"chunk-commons",test:l("src/components"),minChunks:3,priority:5,reuseExistingChunk:!0}}}),t.optimization.runtimeChunk("single")}))},pluginOptions:{"style-resources-loader":{preProcessor:"scss",patterns:[i.resolve(e,"src/css/flex/flex.scss")]}}}}).call(this,"/")},a15b:function(t,e,a){"use strict";var i=a("23e7"),n=a("44ad"),l=a("fc6a"),s=a("a640"),o=[].join,r=n!=Object,c=s("join",",");i({target:"Array",proto:!0,forced:r||!c},{join:function(t){return o.call(l(this),void 0===t?",":t)}})},c40b:function(t,e,a){},f0bb:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user_admin_main"},[a("div",{staticClass:"header-box"},[a("el-form",{attrs:{"label-width":"auto"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{lg:5,xl:5}},[a("el-form-item",{staticStyle:{"margin-bottom":"0px"}},[a("el-input",{attrs:{placeholder:"输入用户昵称/手机号/患者姓名查找"},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleOptions(e)}},model:{value:t.searchValue,callback:function(e){t.searchValue="string"===typeof e?e.trim():e},expression:"searchValue"}},[a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})])],1)],1),a("el-col",{attrs:{lg:3,xl:3}},[a("el-form-item",{staticStyle:{"margin-bottom":"0px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"是否添加企微好友"},on:{change:t.handleOptions},model:{value:t.subscribe_qywx,callback:function(e){t.subscribe_qywx=e},expression:"subscribe_qywx"}},[a("el-option",{attrs:{label:"是否添加企微好友",value:0}}),a("el-option",{attrs:{label:"已添加",value:1}}),a("el-option",{attrs:{label:"未添加",value:2}})],1)],1)],1),a("el-col",{attrs:{lg:3,xl:3}},[a("el-form-item",{staticStyle:{"margin-bottom":"0px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"是否注册哮喘管家"},on:{change:t.handleOptions},model:{value:t.subscribe_miniapp,callback:function(e){t.subscribe_miniapp=e},expression:"subscribe_miniapp"}},[a("el-option",{attrs:{label:"是否注册哮喘管家",value:0}}),a("el-option",{attrs:{label:"已注册",value:1}}),a("el-option",{attrs:{label:"未注册",value:2}})],1)],1)],1),a("el-col",{attrs:{lg:3,xl:3}},[a("el-form-item",{staticStyle:{"margin-bottom":"0px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"是否关注服务号"},on:{change:t.handleOptions},model:{value:t.subscribe_official_account,callback:function(e){t.subscribe_official_account=e},expression:"subscribe_official_account"}},[a("el-option",{attrs:{label:"是否关注服务号",value:0}}),a("el-option",{attrs:{label:"已关注",value:1}}),a("el-option",{attrs:{label:"未关注",value:2}})],1)],1)],1),a("el-col",{attrs:{lg:3,xl:3}},[a("el-form-item",{staticStyle:{"margin-bottom":"0px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"是否完成建档"},on:{change:t.handleOptions},model:{value:t.patient_add,callback:function(e){t.patient_add=e},expression:"patient_add"}},[a("el-option",{attrs:{label:"是否完成建档",value:0}}),a("el-option",{attrs:{label:"已建档",value:1}}),a("el-option",{attrs:{label:"未建档",value:2}})],1)],1)],1),a("el-col",{attrs:{lg:3,xl:3}},[a("el-form-item",{staticStyle:{"margin-bottom":"0px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"是否有入组"},on:{change:t.handleOptions},model:{value:t.patient_in_mgmt,callback:function(e){t.patient_in_mgmt=e},expression:"patient_in_mgmt"}},[a("el-option",{attrs:{label:"是否有入组",value:0}}),a("el-option",{attrs:{label:"已入组",value:1}}),a("el-option",{attrs:{label:"未入组",value:2}})],1)],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{lg:3,xl:3}},[a("el-form-item",{staticClass:"margin_bottom"},[a("a",{on:{click:t.changeDitch}},[a("el-input",{attrs:{placeholder:"全部渠道"},model:{value:t.contact_way_name_list&&t.contact_way_name_list.toString(),callback:function(e){t.$set(t.contact_way_name_list&&t.contact_way_name_list,"toString()",e)},expression:"contact_way_name_list&&contact_way_name_list.toString()"}},[a("i",{staticClass:"el-icon-arrow-down el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})])],1)])],1),a("el-col",{attrs:{lg:3,xl:3}},[a("el-form-item",{staticClass:"margin_bottom"},[a("div",{staticClass:"channer",on:{click:t.chooseLabel}},[t.tag_id_list.length<=0?a("span",[t._v("全部标签")]):a("span",{class:{select:!0}},[t._v(t._s(t.tag_list_join(t.tag_id_list)))]),a("i",{staticClass:"el-icon-arrow-down"})])])],1),a("el-col",{attrs:{lg:8,xl:8}},[a("div",{staticClass:"friend_time"},[a("el-dropdown",{on:{command:t.handleCommand}},[a("span",{staticClass:"add_friend"},[t._v(t._s(t.addFriendTimeTips[t.addFriendTimeIndex-1])),a("i",{staticClass:"el-icon-arrow-down"}),t._v("：")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1"}},[t._v("添加好友时间")]),a("el-dropdown-item",{attrs:{command:"2"}},[t._v("用户注册时间")]),a("el-dropdown-item",{attrs:{command:"3"}},[t._v("首次建档时间")])],1)],1),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",align:"left","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:t.handleOptions},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1)]),a("el-col",{staticStyle:{margin:"8px 0",float:"right"},attrs:{span:6}},[a("el-button",{staticStyle:{float:"right","margin-left":"20px"},attrs:{type:"primary"},on:{click:t.handleOptions}},[t._v("查询")]),a("el-button",{staticStyle:{float:"right","margin-left":"0"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1)],1),a("div",{staticStyle:{margin:"0 16px","padding-top":"16px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"multipleTable",attrs:{data:t.tableData,size:"small",border:"",stripe:"",height:"calc(100vh - 253px)"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center",index:function(e){return(t.page-1)*t.size+e+1}}}),a("el-table-column",{attrs:{label:"用户信息","min-width":"290"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"flex",staticStyle:{"align-items":"center"}},[a("div",{staticStyle:{"padding-right":"10px"}},[a("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:e.row.avatar,fit:"cover"}})],1),a("div",[a("span",[t._v("unionid："+t._s(e.row.union_id||"--"))]),a("a",{staticClass:"ml10 blue",on:{click:function(a){return t.copyText(e.row.union_id)}}},[t._v("复制")]),a("br"),a("span",[t._v("昵 称："+t._s(e.row.nick_name||"--")),a("a",{staticClass:"ml10 blue",on:{click:function(a){return t.copyText(e.row.nick_name)}}},[t._v("复制")]),a("br")]),a("span",[t._v("手机号："+t._s(e.row.phone||"--"))]),e.row.phone?a("a",{staticClass:"ml10 blue",on:{click:function(a){return t.copyText(e.row.phone)}}},[t._v("复制")]):t._e(),a("br")])])]}}])}),a("el-table-column",{attrs:{label:"服务信息","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("企微好友："+t._s(e.row.subscribe_qywx?"已添加":"未添加")+"("+t._s(e.row.qy_userid||"--")+")"),a("br")]),a("span",[t._v("哮喘管家："+t._s(e.row.subscribe_miniapp?"已注册":"未注册")),a("br")]),a("span",[t._v("服务号："+t._s(e.row.subscribe_official_account?"已关注":"未关注")),a("br")])]}}])}),a("el-table-column",{attrs:{label:"渠道信息",prop:"contact_way","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.contact_way||"--")),a("br")])]}}])}),a("el-table-column",{attrs:{label:"标签",prop:"tag_list","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.tag_list.length<=0||null==e.row.tag_list||void 0==e.row.tag_list?a("span",[t._v("--")]):a("span",t._l(e.row.tag_list,(function(e,i){return a("el-tag",{key:i,staticClass:"mr10",staticStyle:{"line-height":"30px","margin-top":"5px"}},[t._v(t._s(e.name))])})),1)]}}])}),a("el-table-column",{attrs:{label:"关键事件时间","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("添加好友时间："+t._s(e.row.subscribe_qywx_time||"--"))]),a("br"),a("span",[t._v("用户注册时间："+t._s(e.row.subscribe_miniapp_time||"--"))]),a("br"),a("span",[t._v("首次建档时间："+t._s(e.row.patient_add_time||"--"))]),a("br")]}}])}),a("el-table-column",{attrs:{label:"家庭成员","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.patient_list.length<=0?a("div",[a("span",[t._v("0人")])]):a("div",[a("span",[t._v(t._s(e.row.patient_list.length)+"人")]),a("el-popover",{attrs:{placement:"left",trigger:"hover"},on:{show:function(a){return t.hoverPatientList(e.row.user_id)}}},[a("el-table",{attrs:{data:t.patient_data_list}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center",index:function(e){return(t.page-1)*t.size+e+1}}}),a("el-table-column",{attrs:{width:"240",label:"基础信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name||"--")),a("br")]),a("span",[t._v(t._s(0===e.row.sex?"男":"女")+"/ "+t._s(e.row.age||"--")+"岁/ "+t._s(e.row.height||"--")+"cm/ "+t._s(e.row.weight||"--")+"kg")]),a("br"),a("span",[t._v(t._s(t.encryption(e.row)))]),a("br")]}}],null,!0)}),a("el-table-column",{attrs:{width:"90",property:"relation",align:"center",label:"成员关系"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.relation||"--")),a("br")])]}}],null,!0)}),a("el-table-column",{attrs:{width:"120",property:"sys_create_time",label:"建档时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sys_create_time||"--")),a("br")])]}}],null,!0)}),a("el-table-column",{attrs:{width:"230",label:"入组信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.mgmt_status?a("div",[a("span",[t._v("医生："+t._s(e.row.contract_doctor_name||"--")),a("br")]),a("span",[t._v("医院："+t._s(e.row.department_name||"--")),a("br")]),a("span",[t._v("门诊号："+t._s(e.row.menzhen_number||"--")),a("br")]),a("span",[t._v("入组时间："+t._s(e.row.in_time||"--")),a("br")])]):a("div",[a("span",[t._v("未入组"),a("br")])])]}}],null,!0)})],1),a("a",{staticClass:"ml10 blue",attrs:{slot:"reference"},slot:"reference"},[t._v("详情")]),a("br")],1),a("br"),a("span",{staticStyle:{"padding-right":"5px","padding-top":"3px"}},[t._v(t._s(e.row.patient_list[0].name)+"，")]),a("span",[t._v(t._s(1===e.row.patient_list[0].mgmt_status?"已入组":"未入组"))]),a("br"),e.row.patient_list.length>1?a("span",{staticStyle:{"padding-right":"5px"}},[t._v(t._s(e.row.patient_list[1].name)+"，")]):t._e(),e.row.patient_list.length>1?a("span",[t._v(t._s(1===e.row.patient_list[1].mgmt_status?"已入组":"未入组"))]):t._e(),a("br"),e.row.patient_list.length>2?a("span",[t._v("...")]):t._e(),a("br")],1)]}}])}),a("el-table-column",{attrs:{label:"操作","min-width":"80",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(a){return t.toPage(e.row)}}},[t._v("查看用户详情")])]}}])})],1)],1),a("div",{staticClass:"bootom_tool",attrs:{align:"right"}},[a("div",[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:function(e){return t.toggleSelection()}},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v(" 当页全选 ")]),a("el-select",{staticStyle:{"margin-left":"20px",width:"260px"},attrs:{placeholder:"增/减积分"},on:{change:t.handleintegral},model:{value:t.integration,callback:function(e){t.integration=e},expression:"integration"}},[a("el-option",{key:"1",attrs:{label:"对选中的人增/减积分",value:"1"}}),a("el-option",{key:"2",attrs:{label:"对筛选出来的全部"+t.total+"人增/减积分",value:"2"}})],1)],1),a("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[20,50,100,200],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("input",{staticStyle:{position:"absolute",left:"-999px"},attrs:{type:"text",id:"input"}}),a("ContactWay",{ref:"contactWay",on:{getContactWayList:t.getContactWayList}}),a("el-dialog",{attrs:{title:"选择标签",visible:t.dialogVisible_label,width:"40%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible_label=e}}},[a("div",{staticStyle:{padding:"10px 0"}},[a("span",[t._v("筛选条件：")]),a("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("以下标签满足其中之一")]),a("br")],1),a("div",{staticStyle:{padding:"10px 0"}},[a("div",{staticStyle:{"padding-bottom":"15px"}},[t._v(" 选择标签： ")]),a("div",{staticClass:"label_style"},t._l(t.labelList,(function(e){return a("a",{key:e.id,staticClass:"label_item",class:{active:e.selected},on:{click:function(a){return t.labelClick(e)}}},[t._v(t._s(e.name))])})),0)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible_label=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleChooseLabel}},[t._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"增/减积分",width:"30%","close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":t.integralCancel,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"积分数量",prop:"integral","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"text",oninput:"if(value>100000)value=100000;if(value<=-100000)value=-100000",onkeyup:"value=value.match(/^-?[1-9]\\d*$/)||value.match(/-?/)",placeholder:"请输入要增/减的积分值，负数代表减积分",autocomplete:"off"},model:{value:t.form.integral,callback:function(e){t.$set(t.form,"integral",e)},expression:"form.integral"}})],1),a("el-form-item",{attrs:{label:"原因",prop:"cause","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",placeholder:"显示在用户端的原因",maxlength:"30",size:"medium","show-word-limit":"",autosize:{minRows:3,maxRows:6},autocomplete:"off"},model:{value:t.form.cause,callback:function(e){t.$set(t.form,"cause",e)},expression:"form.cause"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.integralCancel}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.integralConfirm}},[t._v("确 定")])],1)],1)],1)},n=[],l=(a("99af"),a("4de4"),a("a15b"),a("d81d"),a("b0c0"),a("96cf"),a("1da1")),s=a("5530"),o=a("719e"),r=a("a09d"),c=a("a3d7"),u=a("7d20"),d=(a("5f35"),{name:"index",components:{ContactWay:r["a"]},data:function(){return{page:1,size:20,subscribe_official_account:void 0,subscribe_qywx:void 0,subscribe_miniapp:void 0,patient_add:void 0,patient_in_mgmt:void 0,tableLoading:!0,total:0,tableData:[],searchValue:"",dateRange:[],no_contact_way:null,contact_way_id_list:[],contact_way_name_list:[],addFriendTimeTips:["添加好友时间","用户注册时间","首次建档时间"],addFriendTimeIndex:1,patient_data_list:[],dialogVisible_label:!1,radio:"1",labelList:[],tag_id_list:[],pickerOptions:u["a"],multipleSelection:[],checkAll:!1,isIndeterminate:!1,integration:"",integralType:[],formLabelWidth:"85px",dialogFormVisible:!1,form:{integral:"",cause:""},rules:{integral:[{required:!0,message:"请输入积分值",trigger:"blur"},{min:0,max:7,message:"手动增减的积分绝对值不能超过100000",trigger:"blur"}],cause:[{required:!0,message:"请输入显示在用户端的原因",trigger:"blur"}]},searchRank:{}}},created:function(){var t=this.$route.query,e=t.nick_name,a=t.phone;(e||a)&&(this.searchValue=e||a),this.fetch_user_list({search:this.searchValue})},methods:{fetch_user_list:function(t){var e=this;console.log(t),this.searchRank=Object(s["a"])(Object(s["a"])({},t),{},{page:this.page,size:this.size}),Object(o["userList"])(Object(s["a"])({page:this.page,size:this.size},t)).then((function(t){var a=t.data;0==a.errcode&&(e.total=a.data.total_count,e.tableData=a.data.list.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{choosed_row:!1})}))),e.tableLoading=!1})).catch((function(t){}))},setingArgs:function(){this.$refs.multipleTable.clearSelection();var t=this.searchValue.length>0?this.searchValue:void 0,e=0===this.subscribe_qywx||void 0===this.subscribe_qywx?void 0:1===this.subscribe_qywx,a=0===this.subscribe_miniapp||void 0===this.subscribe_miniapp?void 0:1===this.subscribe_miniapp,i=0==this.subscribe_official_account||void 0==this.subscribe_official_account?void 0:1==this.subscribe_official_account,n=0==this.patient_add||void 0==this.patient_add?void 0:1==this.patient_add,l=0==this.patient_in_mgmt||void 0==this.patient_in_mgmt?void 0:1==this.patient_in_mgmt,s=void 0,o=void 0;if(null!=this.dateRange&&this.dateRange.length>0){var r=this.dateRange.map((function(t,e){var a=new Date(t),i=a.getMonth()+1,n=a.getDate(),l=a.getFullYear(),s=i<10?"0".concat(i):i,o=n<10?"0".concat(n):n;return 1==e?"".concat(l,"-").concat(s,"-").concat(o," 23:59:59"):"".concat(l,"-").concat(s,"-").concat(o," 00:00:00")}));s=r[0],o=r[1]}var c=[];this.tag_id_list.map((function(t){c.push(t.tag_id)})),this.fetch_user_list({patient_add:n,patient_in_mgmt:l,subscribe_official_account:i,search:t,subscribe_qywx:e,subscribe_miniapp:a,start_time:s,end_time:o,time_type:null!=this.dateRange&&this.dateRange.length>0?this.addFriendTimeIndex:void 0,no_contact_way:this.no_contact_way,contact_way_id_list:this.contact_way_id_list,tag_id_list:c.length>0?c:void 0})},handleSizeChange:function(t){this.size=t,this.setingArgs()},handleCurrentChange:function(t){this.page=t,this.setingArgs()},handleOptions:function(){this.page=1,this.setingArgs()},reset:function(){this.$refs.multipleTable.clearSelection(),this.page=1,this.searchValue="",this.subscribe_qywx=void 0,this.subscribe_miniapp=void 0,this.subscribe_official_account=void 0,this.patient_add=void 0,this.patient_in_mgmt=void 0,this.dateRange={},this.no_contact_way=void 0,this.contact_way_id_list=[],this.contact_way_name_list=[],this.tag_id_list=[],this.setingArgs()},changeDitch:function(){this.$refs.contactWay.channelVisible=!0},chooseLabel:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.contactway.tagList({});case 2:a=e.sent,i=a.data,0===i.errcode&&(t.dialogVisible_label=!t.dialogVisible_label,t.labelList=i.data.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{selected:!1})})));case 5:case"end":return e.stop()}}),e)})))()},getTagList:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.contactway.tagList({});case 2:a=e.sent,i=a.data,0===i.errcode&&(t.labelList=i.data);case 5:case"end":return e.stop()}}),e)})))()},handleCommand:function(t){this.addFriendTimeIndex=t},copyText:function(t){var e=document.getElementById("input");e.value=t,e.select(),document.execCommand("Copy"),this.$message({type:"success",message:"复制成功"})},tag_list_join:function(t){if(void 0==t)return"--";var e=[];return t.length>0&&(e=t.map((function(t){return t.name}))),e.length>0?e.join(","):"--"},hoverPatientList:function(t){var e=this;Object(c["bindpatient_userId"])(t).then((function(t){var a=t.data;console.log(a),0===a.errcode&&(e.patient_data_list=a.data.list)})).catch((function(t){}))},encryption:function(t){var e,a=t.id_card||t.patient_code;switch(t.code_type){case 0:e="身份证号："+a.substr(0,3)+"***********"+a.substr(a.length-5,a.length-1);break;case 1:e="护照号："+a.substr(0,1)+"***********"+a.substr(a.length-3,a.length-1);break;case 2:e="通行号："+a.substr(0,1)+"***********"+a.substr(a.length-3,a.length-1);break;default:e="--"}return e},getContactWayList:function(t,e,a){console.log(e),e?(this.no_contact_way=e,this.contact_way_id_list=null,this.contact_way_name_list=["无渠道"]):(this.no_contact_way=null,this.contact_way_id_list=t,this.contact_way_name_list=a),this.setingArgs()},handleClose:function(t){this.dialogVisible_label=!1},labelClick:function(t){t.selected=!t.selected},handleChooseLabel:function(){this.$refs.multipleTable.clearSelection(),this.tag_id_list=this.labelList.filter((function(t){return t.selected})),this.dialogVisible_label=!1,this.setingArgs()},toPage:function(t){var e=this.$router.resolve({name:"scoreDetail",query:{id:t.user_id}}),a=e.href;window.open(a,"_blank")},handleSelectionChange:function(t){this.multipleSelection=t,this.isIndeterminate=t.length>0&&t.length<this.tableData.length,this.checkAll=t.length===this.tableData.length},toggleSelection:function(){this.checkAll?this.$refs.multipleTable.toggleAllSelection():this.$refs.multipleTable.clearSelection()},handleintegral:function(){if(1==this.integration&&this.multipleSelection.length<=0)return this.integration="",void this.$message({message:"请选择用户增减积分",type:"warning"});var t=this.total-this.multipleSelection.length;this.integralType=[{value:"1",label:"对选中的人增/减积分"},{value:"2",label:"对筛选出来的全部".concat(t,"人增/减积分")}],this.dialogFormVisible=!0},integralCancel:function(){this.dialogFormVisible=!1,this.integration="",this.form={integral:"",cause:""}},integralConfirm:function(){var t=this;if(this.form.integral.length<=0)this.$message({message:"请输入要增/减的积分值，负数代表减积分",type:"warning"});else if(this.form.cause.length<=0)this.$message({message:"请输入原因",type:"warning"});else{this.dialogFormVisible=!1;var e=[],a={reason:this.form.cause,score:this.form.integral};this.form={integral:"",cause:""},1==this.integration&&(this.multipleSelection.map((function(t){e.push(t.user_id)})),a["user_id_list"]=e),2==this.integration&&(a["get_user_list_dto"]=this.searchRank),this.integration="",Object(o["updateUserScore"])(a).then((function(e){var a=e.data;0===a.errcode&&t.$message({message:"增/减积分成功",type:"success",duration:2e3}),0!==a.errcode&&t.$message({message:a.errmsg,type:"warning",duration:2e3})})).catch((function(t){console.log(t)}))}}}}),p=d,_=(a("0950"),a("2877")),h=Object(_["a"])(p,i,n,!1,null,"ff5c85ce",null);e["default"]=h.exports}}]);