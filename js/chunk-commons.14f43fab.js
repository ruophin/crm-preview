(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"709f":function(t,e,i){"use strict";var c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cropper-content"},[i("div",{staticClass:"cropper-box"},[i("div",{staticClass:"cropper"},[i("vue-cropper",{ref:"cropper",attrs:{img:t.option.img,outputSize:t.option.outputSize,outputType:t.option.outputType,info:t.option.info,canScale:t.option.canScale,autoCrop:t.option.autoCrop,autoCropWidth:t.option.autoCropWidth,autoCropHeight:t.option.autoCropHeight,fixed:t.option.fixed,fixedNumber:t.option.fixedNumber,full:t.option.full,fixedBox:t.option.fixedBox,canMove:t.option.canMove,canMoveBox:t.option.canMoveBox,original:t.option.original,centerBox:t.option.centerBox,height:t.option.height,infoTrue:t.option.infoTrue,maxImgSize:t.option.maxImgSize,enlarge:t.option.enlarge,mode:t.option.mode},on:{realTime:t.realTime,imgLoad:t.imgLoad}})],1),i("div",{staticClass:"footer-btn"},[i("div",{staticClass:"scope-btn"},[i("label",{ref:"uploadBtn",staticClass:"btn",attrs:{for:"uploads"}},[t._v("选择图片")]),i("input",{staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"uploads",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:function(e){return t.selectImg(e)}}}),i("el-button",{attrs:{size:"mini",type:"danger",plain:"",icon:"el-icon-zoom-in"},on:{click:function(e){return t.changeScale(1)}}},[t._v("放大")]),i("el-button",{attrs:{size:"mini",type:"danger",plain:"",icon:"el-icon-zoom-out"},on:{click:function(e){return t.changeScale(-1)}}},[t._v("缩小")]),i("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:t.rotateLeft}},[t._v("↺ 左旋转")]),i("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:t.rotateRight}},[t._v("↻ 右旋转")])],1),i("div",{staticClass:"upload-btn"},[i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.uploadImg("blob")}}},[t._v("上传图片 "),i("i",{staticClass:"el-icon-upload"})])],1)])]),i("div",{staticClass:"show-preview"},[i("div",{staticClass:"preview",style:t.previews.div},[i("img",{style:t.previews.img,attrs:{src:t.previews.url}})])])])},n=[],a=(i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("96cf"),i("1da1")),s=i("53ca"),o=i("7e79"),h=i("e766"),l={name:"CropperImage",components:{VueCropper:o["VueCropper"]},props:["Name","width","height"],data:function(){return{name:this.Name,previews:{},option:{img:"",outputSize:1,outputType:"jpeg",info:!0,canScale:!0,autoCrop:!0,autoCropWidth:this.width,autoCropHeight:this.height,fixed:!0,fixedNumber:[this.width,this.height],full:!1,fixedBox:!0,canMove:!1,canMoveBox:!0,original:!1,centerBox:!1,height:!0,infoTrue:!1,maxImgSize:3e3,enlarge:1}}},methods:{imgLoad:function(t){console.log("工具初始化函数====="+t)},changeScale:function(t){t=t||1,this.$refs.cropper.changeScale(t)},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},realTime:function(t){this.previews=t},selectImg:function(t){var e=this,i=t.target.files[0];if(!/\.(jpg|jpeg|png|JPG|PNG)$/.test(t.target.value))return this.$message({message:"图片类型要求：jpeg、jpg、png",type:"error"}),!1;var c=new FileReader;c.onload=function(t){var i;i="object"===Object(s["a"])(t.target.result)?window.URL.createObjectURL(new Blob([t.target.result])):t.target.result,e.option.img=i},c.readAsDataURL(i)},uploadImg:function(t){var e=this,i=this;"blob"===t&&this.$refs.cropper.getCropBlob(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(c){var n,a,s,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.resources.resource({token_num:1});case 2:n=t.sent,a=n.data,s=a.data.list,o=s[0],l={region:"ECN",uptoken:o.token,key:o.key},h["a"].upload(c,(function(t){console.log(t),i.$emit("uploadImgSuccess",o.url)}),(function(t){console.error("error: "+JSON.stringify(t))}),l);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},r=l,d=(i("ab04"),i("2877")),u=Object(d["a"])(r,c,n,!1,null,"5c7aedfe",null);e["a"]=u.exports},"7d20":function(t,e,i){"use strict";e["a"]={shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",[new Date,new Date])}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",[e,e])}},{text:"上一周",onClick:function(t){var e=(new Date).getDay()||7,i=(new Date).getTime()-new Date(24*(e+6)*3600*1e3),c=(new Date).getTime()-new Date(24*e*3600*1e3);t.$emit("pick",[i,c])}},{text:"上一月",onClick:function(t){var e=new Date,i=new Date;i.setMonth(i.getMonth()-1),i.setDate(1),e.setMonth(i.getMonth());var c=new Date(e.getFullYear(),i.getMonth()-1,0).getDate();e.setDate(c),t.$emit("pick",[i,e])}},{text:"近7天",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-5184e5),t.$emit("pick",[i,e])}},{text:"近30天",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-2592e6),t.$emit("pick",[i,e])}}]}},"83df":function(t,e,i){"use strict";var c=i("8fa5"),n=i.n(c);n.a},"8fa5":function(t,e,i){},a09d:function(t,e,i){"use strict";var c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:"选择渠道",visible:t.channelVisible,width:"1000px"},on:{"update:visible":function(e){t.channelVisible=e}}},[t.nullChannelVisible?i("el-checkbox",{on:{change:t.noDitchChange},model:{value:t.no_contact_way,callback:function(e){t.no_contact_way=e},expression:"no_contact_way"}},[t._v("无渠道")]):t._e(),i("div",{staticClass:"channel_router mt10 flex"},[i("div",{staticClass:"box-card",staticStyle:{width:"220px"}},[i("div",{staticClass:"header"},[i("span",[t._v("一级渠道")])]),i("div",{staticClass:"body"},[i("el-checkbox",{attrs:{indeterminate:t.isIndeterminate1},on:{change:function(e){return t.checkAllChange(e,1)}},model:{value:t.checkAllDitch1,callback:function(e){t.checkAllDitch1=e},expression:"checkAllDitch1"}},[t._v("全选")]),i("el-checkbox-group",{staticClass:"ditch-checkbox",on:{change:t.checkedChange},model:{value:t.checkedDitch1,callback:function(e){t.checkedDitch1=e},expression:"checkedDitch1"}},t._l(t.ditchList,(function(e){return i("el-checkbox",{key:e.contact_way_id,class:{active:t.curDitch1===e.contact_way_id||t.showDitch1.indexOf(e.contact_way_id)>-1},attrs:{label:e.contact_way_id},nativeOn:{click:function(i){return t.checkboxClick1(i,e)}}},[t._v(t._s(e.name))])})),1)],1)]),i("div",{staticClass:"box-card",staticStyle:{width:"290px","border-left":"0"}},[i("div",{staticClass:"header"},[i("span",[t._v("二级渠道")])]),i("div",{staticClass:"body"},[i("el-checkbox",{attrs:{indeterminate:t.isIndeterminate2},on:{change:function(e){return t.checkAllChange(e,2)}},model:{value:t.checkAllDitch2,callback:function(e){t.checkAllDitch2=e},expression:"checkAllDitch2"}},[t._v("全选")]),i("el-checkbox-group",{staticClass:"ditch-checkbox",on:{change:t.checkedChange2},model:{value:t.checkedDitch2,callback:function(e){t.checkedDitch2=e},expression:"checkedDitch2"}},t._l(t.ditchList2,(function(e){return i("el-checkbox",{key:e.contact_way_id,class:{active:t.curDitch2===e.contact_way_id||t.showDitch2.indexOf(e.contact_way_id)>-1,disabled:e.disabled},attrs:{label:e.contact_way_id},nativeOn:{click:function(i){return t.checkboxClick2(i,e)}}},[t._v(t._s(e.name))])})),1)],1)]),i("div",{staticClass:"box-card",staticStyle:{width:"450px","border-left":"0"}},[i("div",{staticClass:"header"},[i("span",[t._v("三级渠道")])]),i("div",{staticClass:"body"},[i("el-checkbox",{attrs:{indeterminate:t.isIndeterminate3},on:{change:function(e){return t.checkAllChange(e,3)}},model:{value:t.checkAllDitch3,callback:function(e){t.checkAllDitch3=e},expression:"checkAllDitch3"}},[t._v("全选")]),i("el-checkbox-group",{on:{change:t.checkedChange3},model:{value:t.checkedDitch3,callback:function(e){t.checkedDitch3=e},expression:"checkedDitch3"}},t._l(t.ditchList3,(function(e){return i("el-checkbox",{key:e.contact_way_id,attrs:{label:e.contact_way_id,disabled:e.disabled}},[t._v(t._s(e.name))])})),1)],1)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.channelVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.channelConfirm}},[t._v("确 定")])],1)],1)},n=[],a=(i("4de4"),i("4160"),i("c975"),i("d81d"),i("b0c0"),i("159b"),i("96cf"),i("1da1")),s=i("5530"),o=i("2f62"),h={name:"ContactWay",props:{nullChannelVisible:{type:Boolean,default:!0}},data:function(){return{channelVisible:!1,checkAllDitch1:!1,checkAllDitch2:!1,checkAllDitch3:!1,isIndeterminate1:!1,isIndeterminate2:!1,isIndeterminate3:!1,ditchList1:[],ditchList2:[],ditchList3:[],checkedDitch1:[],checkedDitch2:[],checkedDitch3:[],checkedDitch3Name:[],showDitch1:[],showDitch2:[],no_contact_way:!1,curDitch1:"",curDitch2:""}},computed:Object(s["a"])({},Object(o["c"])({ditchList:"user/getDitchList"})),created:function(){this.ditchList.length?this.ditchListMap():this.contactwayTree()},mounted:function(){},methods:Object(s["a"])(Object(s["a"])({},Object(o["d"])("user",["setDitchList"])),{},{contactwayTree:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.contactway.finishedTree();case 2:i=e.sent,c=i.data,0===c.errcode&&(t.setDitchList(c.data.list),t.ditchListMap());case 5:case"end":return e.stop()}}),e)})))()},ditchListMap:function(){var t=[],e=[];this.ditchList.map((function(i){i.show=!1,i.list.map((function(i){i.show=!1,t.push(i),i.list.map((function(t){e.push(t)}))}))}))},channelConfirm:function(){var t=this;this.channelVisible=!1,this.checkedDitch3Name=[],this.ditchList3.map((function(e){t.checkedDitch3.indexOf(e.contact_way_id)>-1&&t.checkedDitch3Name.push(e.name)})),this.$emit("getContactWayList",this.checkedDitch3,this.no_contact_way,this.checkedDitch3Name)},checkAllChange:function(t,e){this.ditchList1=this.ditchList,this.checkedChange1=this.checkedChange,this["checkedDitch"+e]=t?this["ditchList"+e].map((function(t){return t.contact_way_id})):[],this["isIndeterminate"+e]=!1,this["checkedChange"+e](this["checkedDitch"+e])},checkboxClick1:function(t,e){var i=this,c=e.contact_way_id;if(1===t.pointerId&&"el-checkbox__label"!==t.srcElement.className&&"el-checkbox__inner"!==t.srcElement.className&&t.preventDefault(),"el-checkbox__label"===t.srcElement.className){t.preventDefault(),console.log("点击标签");var n=[],a=[],s=[];if(this.ditchList.map((function(t){t.contact_way_id===c&&t.list.map((function(t){s.push(t)}))})),this.ditchList2.map((function(t){t.disabled||n.push(t)})),this.ditchList2=n,this.curDitch1!==c&&this.checkedDitch1.indexOf(c)<0)this.ditchList.map((function(t){t.contact_way_id===c&&t.list.map((function(t){t.disabled=!0,i.ditchList2.push(t)}))})),this.curDitch1=c;else if(this.curDitch1="",this.checkedDitch1.indexOf(c)>-1)if(this.showDitch1.indexOf(c)<0)this.showDitch1.push(c),this.ditchList.map((function(t){t.contact_way_id===c&&t.list.map((function(t){i.ditchList2.push(t)}))}));else{var o=[];this.showDitch1=this.showDitch1.filter((function(t){return t!==c})),console.log(this.showDitch1),this.ditchList2.forEach((function(t){var e=!1;s.forEach((function(i){t.contact_way_id===i.contact_way_id&&(e=!0)})),e||o.push(t)})),this.ditchList2=o,console.log("ditchList2",this.ditchList2)}this.curDitch2="",this.ditchList3.map((function(t){t.disabled||a.push(t)})),this.ditchList3=a}"el-checkbox__inner"===t.srcElement.className&&(console.log("点击checkbox"),this.ditchList.map((function(t){t.contact_way_id===c&&t.list.map((function(t){t.disabled=!1}))})))},checkboxClick2:function(t,e){var i=this,c=e.contact_way_id;if(1===t.pointerId&&"el-checkbox__label"!==t.srcElement.className&&"el-checkbox__inner"!==t.srcElement.className&&t.preventDefault(),"el-checkbox__label"===t.srcElement.className){t.preventDefault();var n=[],a=[];if(this.ditchList2.map((function(t){t.contact_way_id===c&&t.list.map((function(t){a.push(t)}))})),this.ditchList3.map((function(t){t.disabled||n.push(t)})),this.ditchList3=n,this.curDitch2!==c&&this.checkedDitch2.indexOf(c)<0)this.ditchList2.map((function(t){t.contact_way_id===c&&t.list.map((function(t){t.disabled=!0,i.ditchList3.push(t)}))})),this.curDitch2=c;else if(this.curDitch2="",this.checkedDitch2.indexOf(c)>-1)if(this.showDitch2.indexOf(c)<0)this.showDitch2.push(c),this.ditchList2.map((function(t){t.contact_way_id===c&&t.list.map((function(t){i.ditchList3.push(t)}))}));else{var s=[];this.showDitch2=this.showDitch2.filter((function(t){return t!==c})),this.ditchList3.forEach((function(t){var e=!1;a.forEach((function(i){t.contact_way_id===i.contact_way_id&&(e=!0)})),e||s.push(t)})),this.ditchList3=s,console.log("ditchList3",this.ditchList3)}}"el-checkbox__inner"===t.srcElement.className&&(e.disabled&&t.preventDefault(),this.curDitch2=c,this.ditchList2.map((function(t){t.contact_way_id===c&&t.list.map((function(t){t.disabled=!1}))})))},checkedChange:function(t){var e=this,i=t.length;this.checkAllDitch1=i===this.ditchList.length,this.isIndeterminate1=i>0&&i<this.ditchList.length,this.ditchList2=[],this.ditchList3=[],this.showDitch1=t,this.ditchList.map((function(i){t.indexOf(i.contact_way_id)>-1&&i.list.map((function(t){e.ditchList2.push(t),e.checkedDitch2.indexOf(t.contact_way_id)>-1&&t.list.map((function(t){e.ditchList3.push(t)}))}))}))},checkedChange2:function(t){var e=this,i=t.length;this.checkAllDitch2=i===this.ditchList2.length,this.isIndeterminate2=i>0&&i<this.ditchList2.length,this.ditchList3=[],this.showDitch2=t,this.ditchList2.map((function(i){t.indexOf(i.contact_way_id)>-1&&i.list.map((function(t){e.ditchList3.push(t)}))}))},checkedChange3:function(t){var e=t.length;this.checkAllDitch3=e===this.ditchList3.length,this.isIndeterminate3=e>0&&e<this.ditchList3.length},noDitchChange:function(t){t&&(this.checkedDitch1=[],this.checkedDitch2=[],this.checkedDitch3=[],this.isIndeterminate1=!1,this.isIndeterminate2=!1,this.isIndeterminate3=!1)}})},l=h,r=(i("83df"),i("2877")),d=Object(r["a"])(l,c,n,!1,null,"63eb5d74",null);e["a"]=d.exports},ab04:function(t,e,i){"use strict";var c=i("f030"),n=i.n(c);n.a},f030:function(t,e,i){}}]);