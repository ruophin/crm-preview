(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79c5a7c0"],{"5a0c":function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",s="second",i="minute",o="hour",a="day",u="week",l="month",c="quarter",d="year",h="date",f="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},_=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},$={s:_,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),s=n%60;return(e<=0?"+":"-")+_(r,2,"0")+":"+_(s,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),s=e.clone().add(r,l),i=n-s<0,o=e.clone().add(r+(i?-1:1),l);return+(-(r+(n-s)/(i?s-o:o-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:d,w:u,d:a,D:h,h:o,m:i,s:s,ms:r,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",w={};w[v]=g;var y=function(t){return t instanceof x},b=function(t,e,n){var r;if(!t)return v;if("string"==typeof t)w[t]&&(r=t),e&&(w[t]=e,r=t);else{var s=t.name;w[s]=t,r=s}return!n&&r&&(v=r),r||!n&&v},S=function(t,e){if(y(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new x(n)},M=$;M.l=b,M.i=y,M.w=function(t,e){return S(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var x=function(){function g(t){this.$L=b(t.locale,null,!0),this.parse(t)}var _=g.prototype;return _.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(M.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(m);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},_.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},_.$utils=function(){return M},_.isValid=function(){return!(this.$d.toString()===f)},_.isSame=function(t,e){var n=S(t);return this.startOf(e)<=n&&n<=this.endOf(e)},_.isAfter=function(t,e){return S(t)<this.startOf(e)},_.isBefore=function(t,e){return this.endOf(e)<S(t)},_.$g=function(t,e,n){return M.u(t)?this[e]:this.set(n,t)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(t,e){var n=this,r=!!M.u(e)||e,c=M.p(t),f=function(t,e){var s=M.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?s:s.endOf(a)},m=function(t,e){return M.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},p=this.$W,g=this.$M,_=this.$D,$="set"+(this.$u?"UTC":"");switch(c){case d:return r?f(1,0):f(31,11);case l:return r?f(1,g):f(0,g+1);case u:var v=this.$locale().weekStart||0,w=(p<v?p+7:p)-v;return f(r?_-w:_+(6-w),g);case a:case h:return m($+"Hours",0);case o:return m($+"Minutes",1);case i:return m($+"Seconds",2);case s:return m($+"Milliseconds",3);default:return this.clone()}},_.endOf=function(t){return this.startOf(t,!1)},_.$set=function(t,e){var n,u=M.p(t),c="set"+(this.$u?"UTC":""),f=(n={},n[a]=c+"Date",n[h]=c+"Date",n[l]=c+"Month",n[d]=c+"FullYear",n[o]=c+"Hours",n[i]=c+"Minutes",n[s]=c+"Seconds",n[r]=c+"Milliseconds",n)[u],m=u===a?this.$D+(e-this.$W):e;if(u===l||u===d){var p=this.clone().set(h,1);p.$d[f](m),p.init(),this.$d=p.set(h,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},_.set=function(t,e){return this.clone().$set(t,e)},_.get=function(t){return this[M.p(t)]()},_.add=function(r,c){var h,f=this;r=Number(r);var m=M.p(c),p=function(t){var e=S(f);return M.w(e.date(e.date()+Math.round(t*r)),f)};if(m===l)return this.set(l,this.$M+r);if(m===d)return this.set(d,this.$y+r);if(m===a)return p(1);if(m===u)return p(7);var g=(h={},h[i]=e,h[o]=n,h[s]=t,h)[m]||1,_=this.$d.getTime()+r*g;return M.w(_,this)},_.subtract=function(t,e){return this.add(-1*t,e)},_.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=t||"YYYY-MM-DDTHH:mm:ssZ",s=M.z(this),i=this.$H,o=this.$m,a=this.$M,u=n.weekdays,l=n.months,c=function(t,n,s,i){return t&&(t[n]||t(e,r))||s[n].substr(0,i)},d=function(t){return M.s(i%12||12,t,"0")},h=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:M.s(a+1,2,"0"),MMM:c(n.monthsShort,a,l,3),MMMM:c(l,a),D:this.$D,DD:M.s(this.$D,2,"0"),d:String(this.$W),dd:c(n.weekdaysMin,this.$W,u,2),ddd:c(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(i),HH:M.s(i,2,"0"),h:d(1),hh:d(2),a:h(i,o,!0),A:h(i,o,!1),m:String(o),mm:M.s(o,2,"0"),s:String(this.$s),ss:M.s(this.$s,2,"0"),SSS:M.s(this.$ms,3,"0"),Z:s};return r.replace(p,(function(t,e){return e||m[t]||s.replace(":","")}))},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(r,h,f){var m,p=M.p(h),g=S(r),_=(g.utcOffset()-this.utcOffset())*e,$=this-g,v=M.m(this,g);return v=(m={},m[d]=v/12,m[l]=v,m[c]=v/3,m[u]=($-_)/6048e5,m[a]=($-_)/864e5,m[o]=$/n,m[i]=$/e,m[s]=$/t,m)[p]||$,f?v:M.a(v)},_.daysInMonth=function(){return this.endOf(l).$D},_.$locale=function(){return w[this.$L]},_.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=b(t,e,!0);return r&&(n.$L=r),n},_.clone=function(){return M.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},g}(),D=x.prototype;return S.prototype=D,[["$ms",r],["$s",s],["$m",i],["$H",o],["$W",a],["$M",l],["$y",d],["$D",h]].forEach((function(t){D[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),S.extend=function(t,e){return t.$i||(t(e,x,S),t.$i=!0),S},S.locale=b,S.isDayjs=y,S.unix=function(t){return S(1e3*t)},S.en=w[v],S.Ls=w,S.p={},S}))},"7bf6":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"patientmgmt"},[n("div",{staticClass:"header-box",staticStyle:{padding:"6px 20px"}},[n("el-form",{attrs:{"label-width":"auto"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{xs:6,sm:5,md:6,lg:4,xl:3}},[n("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{"label-width":"0"}},[n("el-input",{attrs:{placeholder:"输入sn设备号"},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handledOptions(e)}},model:{value:t.searchValue,callback:function(e){t.searchValue="string"===typeof e?e.trim():e},expression:"searchValue"}},[n("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})])],1)],1),n("el-col",{attrs:{xs:7,sm:6,md:6,lg:5,xl:4}},[n("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"商品:"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{"collapse-tags":"",placeholder:"选择商品"},on:{change:t.handledOptions},model:{value:t.goods_id,callback:function(e){t.goods_id=e},expression:"goods_id"}},[n("el-option",{key:"",attrs:{label:"全部商品",value:""}}),n("el-option",{key:1,attrs:{label:"PF286",value:1}}),n("el-option",{key:2,attrs:{label:"咬嘴套件",value:2}}),n("el-option",{key:3,attrs:{label:"PF286套件（电商专用）",value:3}})],1)],1)],1),n("el-col",{attrs:{xs:7,sm:5,md:6,lg:5,xl:3}},[n("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"店铺:"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{"collapse-tags":"",placeholder:"选择店铺"},on:{change:t.handledOptions},model:{value:t.store_id,callback:function(e){t.store_id=e},expression:"store_id"}},[n("el-option",{attrs:{label:"全部店铺",value:""}}),t._l(t.storeList,(function(t){return n("el-option",{key:t.store_id,attrs:{label:t.name,value:t.store_id}})}))],2)],1)],1),n("el-col",{attrs:{xs:7,sm:5,md:6,lg:5,xl:3}},[n("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"状态:"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{"collapse-tags":"",placeholder:"操作后状态"},on:{change:t.handledOptions},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[n("el-option",{key:"",attrs:{label:"全部",value:""}}),n("el-option",{key:1,attrs:{label:"在库",value:1}}),n("el-option",{key:2,attrs:{label:"已租赁",value:2}}),n("el-option",{key:3,attrs:{label:"已销售",value:3}}),n("el-option",{key:4,attrs:{label:"退货入库",value:4}})],1)],1)],1),n("el-col",{attrs:{xs:7,sm:5,md:8,lg:10,xl:7}},[n("el-form-item",{staticStyle:{"margin-bottom":"0px","margin-left":"0px",display:"inline-block"},attrs:{label:"时间："}},[n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.handledOptions},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1)],1),n("el-col",{staticStyle:{margin:"8px 0",float:"right"},attrs:{span:4}},[n("el-button",{staticStyle:{float:"right","margin-left":"20px"},attrs:{type:"primary"},on:{click:t.handledOptions}},[t._v("查询")]),n("el-button",{staticStyle:{float:"right"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1)],1),n("div",{staticStyle:{margin:"0 16px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"elTable",attrs:{data:t.tableData,size:"small",border:"",stripe:"",height:"calc(100vh - 212px)"}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center",index:function(t){return t+1}}}),n("el-table-column",{attrs:{label:"SN设备号",prop:"sn_num","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.sn_num?e.row.sn_num:"--"))])]}}])}),n("el-table-column",{attrs:{label:"操作",prop:"state","min-width":"40"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.operate?t.deviceOperations(e.row.operate):"--"))])]}}])}),n("el-table-column",{attrs:{label:"操作后状态",prop:"state","min-width":"40"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.state?t.goodOpes[e.row.state-1]:"--"))])]}}])}),n("el-table-column",{attrs:{label:"店铺/仓库","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.store_name)+t._s(e.row.warehouse_name?"/":"")+t._s(e.row.warehouse_name))])]}}])}),n("el-table-column",{attrs:{label:"库存操作信息","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v("时间："+t._s(e.row.create_time||"--"))]),n("br"),n("span",[t._v("操作人："+t._s(e.row.create_name||"--"))])]}}])}),n("el-table-column",{attrs:{label:"用户交易信息","min-width":"145"},scopedSlots:t._u([{key:"default",fn:function(e){return[2!=e.row.state&&3!=e.row.state||!e.row.order_info?t._e():n("div",[n("span",[t._v(" 用户："),n("a",{class:{blue:e.row.order_info&&e.row.order_info.nick_name},on:{click:function(n){return t.toPage(e.row)}}},[t._v(t._s(e.row.order_info&&e.row.order_info.nick_name||"--"))])]),n("br"),n("span",[t._v("患者："),n("a",{class:{blue:e.row.order_info&&e.row.order_info.patient_name},on:{click:function(n){return t.toCareprogram(e.row.order_info)}}},[t._v(t._s(e.row.order_info&&e.row.order_info.patient_name||"--"))])]),n("br"),n("span",[t._v("手机号："+t._s(e.row.order_info&&e.row.order_info.phone||"--"))]),n("br"),n("span",[t._v("支付时间："+t._s(e.row.order_info&&e.row.order_info.pay_time||"--"))]),n("br"),n("span",[t._v("订单号："),n("a",{class:{blue:e.row.order_info&&e.row.order_info.tid},on:{click:function(n){return t.toOrder(e.row.order_info)}}},[t._v(t._s(e.row.order_info&&e.row.order_info.tid||"--"))])]),n("br"),e.row.order_info&&e.row.order_info.courier_type?n("span",[t._v("物流："+t._s(3==e.row.order_info.courier_type?"中通":"顺丰")),n("br")]):t._e(),e.row.order_info&&e.row.order_info.courier_num?n("span",[t._v("物流单号："+t._s(e.row.order_info.courier_num)),n("br")]):t._e(),2==e.row.state&&e.row.front_consent_form_url&&e.row.obverse_consent_form_url?n("span",[t._v("知情同意书："),n("br")]):t._e(),2==e.row.state&&e.row.front_consent_form_url&&e.row.obverse_consent_form_url?n("div",[n("el-image",{staticStyle:{width:"100px",height:"100px",margin:"10px"},attrs:{src:e.row.front_consent_form_url,fit:"contain","preview-src-list":[e.row.front_consent_form_url]}},[n("div",{staticStyle:{"line-height":"100px","background-color":"#F3F6F9","text-align":"center",color:"#BCC0C8","font-size":"14px"},attrs:{slot:"error"},slot:"error"},[n("i",[t._v("暂无")])])]),n("el-image",{staticStyle:{width:"100px",height:"100px",margin:"10px"},attrs:{src:e.row.obverse_consent_form_url,fit:"contain","preview-src-list":[e.row.obverse_consent_form_url]}},[n("div",{staticStyle:{"line-height":"100px","background-color":"#F3F6F9","text-align":"center",color:"#BCC0C8","font-size":"14px"},attrs:{slot:"error"},slot:"error"},[n("i",[t._v("暂无")])])])],1):t._e()])]}}])}),n("el-table-column",{attrs:{label:"备注",prop:"remark"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.remark||"--"))])]}}])})],1)],1),n("div",{staticStyle:{margin:"10px 16px 0px"},attrs:{align:"right"}},[n("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[20,50,100,200],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},s=[],i=(n("96cf"),n("1da1")),o=n("5530"),a=n("2f62"),u=n("5a0c"),l=n.n(u),c=n("d772"),d=n.n(c);l.a.extend(d.a);var h={data:function(){return{total:0,page:1,size:20,searchValue:void 0,store_id:"",goods_id:1,state:void 0,tableLoading:!0,records:{},tableData:[],dateRange:[],operations:["采购入库","租赁出库","销售出库","退货入库","库存调整"],goodOpes:["在库","已租赁","已销售","退货入库"]}},computed:Object(o["a"])({},Object(a["c"])({storeList:"store/getStoreList"})),created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.storeList.length){e.next=3;break}return e.next=3,t.setStoreList();case 3:n=new Date,n.setDate(1),t.dateRange=[n,new Date],t.fetchDataInfo();case 7:case"end":return e.stop()}}),e)})))()},methods:Object(o["a"])(Object(o["a"])({},Object(a["b"])("store",["setStoreList"])),{},{handleSizeChange:function(t){this.size=t,this.fetchDataInfo()},handleCurrentChange:function(t){this.page=t,this.fetchDataInfo()},reset:function(){this.page=1,this.searchValue=void 0,this.store_id="",this.goods_id=1;var t=new Date;t.setDate(1),this.dateRange=[t,new Date],this.fetchDataInfo()},handledOptions:function(){this.page=1,this.fetchDataInfo()},fetchDataInfo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.store.getAllGoodsStateChangeRecords({page:t.page,size:t.size,sn_num:t.searchValue,store_id:t.store_id,goods_id:t.goods_id,state:t.state,start_time:t.dateRange&&t.dateRange.length?l()(t.dateRange[0]).format("YYYY-MM-DD")+" 00:00:00":void 0,end_time:t.dateRange&&t.dateRange.length?l()(t.dateRange[1]).format("YYYY-MM-DD")+" 23:59:59":void 0});case 2:n=e.sent,r=n.data,0==r.errcode&&(t.records=r.data,t.tableData=t.records&&t.records.list||[],t.total=t.records&&t.records.total_count||0),t.tableLoading=!1;case 6:case"end":return e.stop()}}),e)})))()},toPage:function(t){null!=t&&console.log(t)},toCareprogram:function(t){if(null!=t){sessionStorage.setItem("viewIndex",1);var e=this.$router.resolve({name:"careprogram",query:{search:t.patient_name}}),n=e.href;window.open(n,"_blank")}},toOrder:function(t){if(null!=t){var e=this.$router.resolve({name:"ordermgmt",query:{tid:t.tid}}),n=e.href;window.open(n,"_blank")}},deviceOperations:function(t){return this.operations[t-1]}})},f=h,m=n("2877"),p=Object(m["a"])(f,r,s,!1,null,null,null);e["default"]=p.exports},d772:function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){"use strict";var t,e,n=1e3,r=6e4,s=36e5,i=864e5,o=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,a=31536e6,u=2592e6,l=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,c={years:a,months:u,days:i,hours:s,minutes:r,seconds:n,milliseconds:1,weeks:6048e5},d=function(t){return t instanceof $},h=function(t,e,n){return new $(t,n,e.$l)},f=function(t){return e.p(t)+"s"},m=function(t){return t<0},p=function(t){return m(t)?Math.ceil(t):Math.floor(t)},g=function(t){return Math.abs(t)},_=function(t,e){return t?m(t)?{negative:!0,format:""+g(t)+e}:{negative:!1,format:""+t+e}:{negative:!1,format:""}},$=function(){function m(t,e,n){var r=this;if(this.$d={},this.$l=n,void 0===t&&(this.$ms=0,this.parseFromMilliseconds()),e)return h(t*c[f(e)],this);if("number"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if("object"==typeof t)return Object.keys(t).forEach((function(e){r.$d[f(e)]=t[e]})),this.calMilliseconds(),this;if("string"==typeof t){var s=t.match(l);if(s){var i=s.slice(2).map((function(t){return null!=t?Number(t):0}));return this.$d.years=i[0],this.$d.months=i[1],this.$d.weeks=i[2],this.$d.days=i[3],this.$d.hours=i[4],this.$d.minutes=i[5],this.$d.seconds=i[6],this.calMilliseconds(),this}}return this}var g=m.prototype;return g.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce((function(e,n){return e+(t.$d[n]||0)*c[n]}),0)},g.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=p(t/a),t%=a,this.$d.months=p(t/u),t%=u,this.$d.days=p(t/i),t%=i,this.$d.hours=p(t/s),t%=s,this.$d.minutes=p(t/r),t%=r,this.$d.seconds=p(t/n),t%=n,this.$d.milliseconds=t},g.toISOString=function(){var t=_(this.$d.years,"Y"),e=_(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var r=_(n,"D"),s=_(this.$d.hours,"H"),i=_(this.$d.minutes,"M"),o=this.$d.seconds||0;this.$d.milliseconds&&(o+=this.$d.milliseconds/1e3);var a=_(o,"S"),u=t.negative||e.negative||r.negative||s.negative||i.negative||a.negative,l=s.format||i.format||a.format?"T":"",c=(u?"-":"")+"P"+t.format+e.format+r.format+l+s.format+i.format+a.format;return"P"===c||"-P"===c?"P0D":c},g.toJSON=function(){return this.toISOString()},g.format=function(t){var n=t||"YYYY-MM-DDTHH:mm:ss",r={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return n.replace(o,(function(t,e){return e||String(r[t])}))},g.as=function(t){return this.$ms/c[f(t)]},g.get=function(t){var e=this.$ms,n=f(t);return"milliseconds"===n?e%=1e3:e="weeks"===n?p(e/c[n]):this.$d[n],0===e?0:e},g.add=function(t,e,n){var r;return r=e?t*c[f(e)]:d(t)?t.$ms:h(t,this).$ms,h(this.$ms+r*(n?-1:1),this)},g.subtract=function(t,e){return this.add(t,e,!0)},g.locale=function(t){var e=this.clone();return e.$l=t,e},g.clone=function(){return h(this.$ms,this)},g.humanize=function(e){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},g.milliseconds=function(){return this.get("milliseconds")},g.asMilliseconds=function(){return this.as("milliseconds")},g.seconds=function(){return this.get("seconds")},g.asSeconds=function(){return this.as("seconds")},g.minutes=function(){return this.get("minutes")},g.asMinutes=function(){return this.as("minutes")},g.hours=function(){return this.get("hours")},g.asHours=function(){return this.as("hours")},g.days=function(){return this.get("days")},g.asDays=function(){return this.as("days")},g.weeks=function(){return this.get("weeks")},g.asWeeks=function(){return this.as("weeks")},g.months=function(){return this.get("months")},g.asMonths=function(){return this.as("months")},g.years=function(){return this.get("years")},g.asYears=function(){return this.as("years")},m}();return function(n,r,s){t=s,e=s().$utils(),s.duration=function(t,e){var n=s.locale();return h(t,{$l:n},e)},s.isDuration=d;var i=r.prototype.add,o=r.prototype.subtract;r.prototype.add=function(t,e){return d(t)&&(t=t.asMilliseconds()),i.bind(this)(t,e)},r.prototype.subtract=function(t,e){return d(t)&&(t=t.asMilliseconds()),o.bind(this)(t,e)}}}))}}]);